import { Callout } from 'nextra/components';

# Guide

## Sidebar

<Callout>
  Previous versions of this plugin recommended an autogenerated sidebar
  configuration. However we have decided it is more deterministic and
  configurable to use a manual sidebar configuration with a generated sidebar
  file.
</Callout>

A docusaurus sidebar file `typedoc-sidebar.cjs` is published to the relevant output directory along with the generated markdown documentation.

This file should be referenced in sidebars.js using a sidebar slice and can be configured in following way:

```js filename="sidebars.js"
module.exports = {
  typedocSidebar: [
    {
      type: 'category',
      label: 'Typedoc API',
      link: {
        type: 'doc',
        id: 'api/index',
      },
      items: require('./docs/api/typedoc-sidebar.cjs'),
    },
  ],
};
```

Please see https://docusaurus.io/docs/sidebar for sidebar documentation.

## Multi Instance

It is possible to build multi TypeDoc instances by passing in multiple configs with unique ids:

```js filename="docusaurus.config.js"
module.exports = {
  plugins: [
    [
      'docusaurus-plugin-typedoc',
      {
        id: 'api-1',
        entryPoints: ['../api-1/src/index.ts'],
        tsconfig: '../api-1/tsconfig.json',
        out: 'api-1',
      },
    ],
    [
      'docusaurus-plugin-typedoc',
      {
        id: 'api-2',
        entryPoints: ['../api-2/src/index.ts'],
        tsconfig: '../api-2/tsconfig.json',
        out: 'api-2',
      },
    ],
  ],
};
```

## Watch Mode

Watching files is supported by passing in the `watch: true` option see https://typedoc.org/guides/options/#watch.

Targetting the option in development mode only can be achieved using Node.js Environment Variables:

```json filename="package.json"
{
  "scripts": {
    "start": "TYPEDOC_WATCH=true docusaurus start",
    "build": "TYPEDOC_WATCH=false docusaurus build"
  }
}
```

```js filename="docusaurus.config.js"
module.exports = {
  plugins: [
    [
      'docusaurus-plugin-typedoc',
      {
        entryPoints: ['../src/index.ts'],
        tsconfig: '../tsconfig.json',
        watch: process.env.TYPEDOC_WATCH,
      },
    ],
  ],
};
```
